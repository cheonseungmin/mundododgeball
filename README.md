# Welcome to mundododgeball!


## 0. 개발 배경   

 2018년부터 웹 개발자로 방향을 잡고 공부를 시작하였습니다. 2019년 겨울방학이 되고 어느정도 준비가 되었다고 느끼게 되었습니다. 그동안의 지식을 이용하여 프로그램을 만들고 싶었습니다. 무엇을 만들까 고민을 하던 중 평소 즐기는 게임인 리그 오브 레전드의 미니 게임을 웹 기술로 만들어보자 결정하게 되었습니다.   
 혼자서 만들어야 했기 때문에 클라이언트, 서버, 데이터 베이스 모든 것을 알아야 했습니다. 우선 클라이언트 측면에서는 react를 이용하였습니다. single page에 특화된 react는 하나의 모듈로 만들어지는 게임과 잘 어울릴 것이라고 판단되었기 때문입니다. 또한 서버의 연산을 최대한 줄이기 위해 사용자의 브라우저에서 연산 과정이 진행되게끔 계획하였습니다. 이는 컴포넌트 클래스의 state를 통한 속성 관리와 전송받은 데이터를 setState 통해 갱신하여 페이지에서 발생한 이벤트를 기민하게 반응할 수 있었습니다. 서버와의 통신은 axios 모듈을 사용하여 get, post 요청을 보다 쉽게 할 수 있었고 socket 모듈을 이용하여 자신의 state를 상대방의 socket과 통신할 수 있었습니다. 마지막으로 하나의 js파일이 더욱 속도가 빠르기 때문에 webpack을 통한 번들링으로 마무리 하였습니다.
 서버 측면에서는 node.js를 사용하였습니다. 자바 스크립트에 대한 공부를 하고 있었기에 쉽게 접근할 수 있었습니다. 컴퓨터를 설치하고 포트포워딩을 통해 환경을 구축하였습니다. 서버에서는 다양한 클라이언트의 요청을 파악하여 이에 응답하는 것이 중요했습니다. 이것은 프로젝트에 대한 전체적인 이해를 필요로 하는 과정이었습니다. socket.io 모듈을 통해 클라이언트들에게 socket을 생성시켜줄 수 있었습니다.  mysql 모듈을 통해 쿼리 스트링을 생성, 실행하여 database에 접근하여 테이블, 튜플들을 관리할 수 있었습니다. 또한 데이터베이스에서 관리되는 userId와 socketId를 통해 각각의 클라이언트들의 socket을 연결해 통 신 역할을 수행할 수 있었습니다.   
 마지막으로 데이터베이스는 mysql을 사용하였습니다. 학교 데이터 베이스 수업때 공부한 경험이 있기 때문에 선택하였습니다. 지금은 사용자 진입장벽을 낮추기 위해 회원가입 기능은 없어 굳이 데이터베이스로 할 필요성은 없었지만, 후에 회원가입, 친구목록, 랭킹 시스템 등을 개발(개발할 수 있는 기술 기보유)하게 된다면 그 데이터들을 관리해야하기 때문에 데이터베이스를 설계 하였습니다. 이곳 튜플에는 사용자의 id, 사용자 브라우저의 socketId, 사용자 브라우저의 state 값이 담겨있습니다.   
 여담으로 개발을 진행하다가 힘들었던 점이 하나 있습니다. 그것은 바로 디자이너의 부재였습니다. 기술적으로는 제가 충분히 해결할 수 있었지만 제가 원하는 모습으로 그림 그리는 기술, 디자인 감각,  포토샵 기술 등은 혼자 힘으로 해결하기 어려웠습니다. 그래서 친구들에게 부탁하여 같은 전남대학교 디자인과 학생을 소개받게 되었습니다. 처음부터 포트폴리오를 목표로 같이 프로젝트를 계획한 사람이 아니여서 13만원이나 되는 비용을 지불해야만 했습니다. 그렇지만 저는 프로젝트를 완수하고 싶다는 마음이 그만큼 절박했기 때문에 그 분과 진행하게 되었습니다.  이 과정에서 자신이 모든 것을 해결할 수 없다는 매우 가치있는 깨달음을 얻게 되었습니다. 사람들은 각자가 잘하는 것이 있고 못하는 것이 있기 때문에 팀이 된다면 부족한 점들을 서로 매꿔주며 더욱 완성도 있는 작품을 만들 수 있다고 크게 배웠습니다!  
 마지막으로 저는 웹 개발을 좋아하기 때문에 이 모든 과정이 즐거웠습니다. 제가 가지고 있는 지식으로 완성품을 만들었다는 것도 매우 뿌듯했습니다. 나중에 좋아하는 일로 직업을 가질 수 있다는 것에 행복한 경험이었습니다.   

## 1. 플레이 화면: 게임하러 가기 :point_right: www.dudghsx.com   
![login](https://user-images.githubusercontent.com/63775931/82215296-29731f80-9952-11ea-8b7b-bbb964353344.gif)   
ㄴ로그인 화면      
![userList](https://user-images.githubusercontent.com/63775931/82216148-7b687500-9953-11ea-8dca-243587344b6b.gif)   
ㄴ유저 검색 및 초대 화면      
![ingame](https://user-images.githubusercontent.com/63775931/82216207-91763580-9953-11ea-8275-339253864f11.gif)   
ㄴ게임 화면      
![end](https://user-images.githubusercontent.com/63775931/82216210-93d88f80-9953-11ea-8350-8d03715d2bd4.gif)   
ㄴ게임 종료 화면      

## 2. 실행 환경 설정
### 모듈 설치 및 jsx transfiling
```
$cd server.js가 있는 폴더
$npm install // 필요한 모듈 설치
$npm run build // "webpack --mode=development" 실행
```   
### 사용 된 모듈
```
axios
express
mysql
socket.io
socket.io-client
``` 

### database 구축  
```
(1) mySQL 설치  
(2) database mundododgeball 생성  
(3) users table 생성 (column: userId, socketId, state) primekey: userId     
```   
![image](https://user-images.githubusercontent.com/63775931/97796649-f7cbe780-1c57-11eb-93be-248d3d74ef7c.png)   

## 3. 컴포넌트 소개
### 번들링 전 .jsx 코드 보는 법   
![image](https://user-images.githubusercontent.com/63775931/97796602-3ca34e80-1c57-11eb-89bd-9ee3aba4583f.png)   
### main.jsx
user에 대한 정보들을 최상위에서 관리하는 컴포넌트   
box 컴포넌트를 생성하여 자기 자신을 속성 값으로 전달함   
### box.jsx
server, database에게 전달 받은 데이터를 이용하여 main의 state를 갱신하는 컴포넌트   
사용자 목록 보기 기능과 게임 초대 기능이 있음   
main의 state가 gaming이 된다면 contents 컴포넌트를 전달함   
### userList.jsx
서버에서 전송한 database의 튜플들을 받아와 유저 목록을 갱신하는 컴포넌트   
튜플의 userId가 자기자신, state가 gaming인 경우에는 출력하지 않음   
### contents.jsx
게임이 진행되는 컴포넌트   
myChampion과 otherChampion 변수에 챔피언 인스턴스를 생성함   
각 챔피언에 담겨있는 함수들을 이벤트 발생 시에 실행시킴   
render에서 각 챔피언 인스턴스들이 갖고 있는 속성들 값을 이용하여 렌더링 함   
### mundo.jsx
챔피언 컴포넌트   
각 이벤트에 실행되는 함수들을 갖고 있음   
지금은 문도 하나이지만 다른 champion.jsx 파일을 생성한다면 다른 챔피언으로도 플레이 가능   
